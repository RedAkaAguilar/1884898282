<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Descarga • ZyrAkaNetwork</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">

<style>
:root{
  --glass:rgba(255,255,255,.22);
  --border:rgba(255,255,255,.35);
  --text:#fff;
  --muted:rgba(255,255,255,.7);
  --blur:32px;
  --spring:cubic-bezier(.28,1.25,.55,1);
  --accent:#8bffe0;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}

body{
  margin:0;
  min-height:100vh;
  font-family:Outfit,system-ui;
  background:linear-gradient(120deg,#0b162a,#0b2a24,#0b162a);
  background-size:400% 400%;
  animation:bg 18s ease infinite;
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
}

@keyframes bg{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.card{
  width:440px;
  padding:36px 32px;
  border-radius:32px;
  background:linear-gradient(180deg,rgba(255,255,255,.45),rgba(255,255,255,.14));
  backdrop-filter:blur(var(--blur)) saturate(180%);
  border:1px solid var(--border);
  box-shadow:0 90px 220px rgba(0,0,0,.85);
  animation:enter .9s var(--spring);
}

@keyframes enter{
  from{opacity:0;transform:translateY(50px) scale(.92)}
  to{opacity:1;transform:none}
}

h1{margin:0 0 6px;font-size:22px}
.desc{font-size:14px;color:var(--muted);line-height:1.55}

.loader{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
}

.spinner{
  width:54px;
  height:54px;
  border-radius:50%;
  border:4px solid rgba(255,255,255,.25);
  border-top-color:var(--accent);
  animation:spin 1s linear infinite;
}

@keyframes spin{to{transform:rotate(360deg)}}

.section{
  margin-top:18px;
  border-radius:20px;
  background:rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.35);
  overflow:hidden;
  transition:transform .25s var(--spring);
}

.section:hover{transform:translateY(-2px)}

.section-header{
  display:flex;
  align-items:center;
  gap:10px;
  padding:14px 16px;
  cursor:pointer;
}

.section-header span{font-size:22px}

.recommended{
  font-size:11px;
  background:linear-gradient(135deg,#9dffe9,#6cf2ff);
  color:#000;
  padding:3px 8px;
  border-radius:999px;
  font-weight:700;
}

.section-content{
  padding:14px 16px;
  display:none;
  animation:fade .35s ease;
}

@keyframes fade{
  from{opacity:0;transform:translateY(-6px)}
  to{opacity:1}
}

.section-content p{
  font-size:13px;
  color:rgba(255,255,255,.8);
  line-height:1.5;
  white-space:pre-line;
}

.download{
  margin-top:12px;
  height:44px;
  border-radius:14px;
  background:linear-gradient(135deg,#9dffe9,#6cf2ff);
  color:#000;
  font-weight:700;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  text-decoration:none;
}

.error{text-align:center}
.error span{font-size:56px;opacity:.7}
</style>
</head>

<body>
<div id="app" class="card">
  <div class="loader">
    <div class="spinner"></div>
    <div class="desc">Cargando descarga…</div>
  </div>
</div>

<script>
const DATA_URL='/descarga-manager.json'
const id=new URLSearchParams(location.search).get('id')
const app=document.getElementById('app')
const os=navigator.platform.toLowerCase()

function rich(t){
  return t
    .replace(/\*\*(.*?)\*\*/g,'<b>$1</b>')
    .replace(/_(.*?)_/g,'<i>$1</i>')
    .replace(/`(.*?)`/g,'<code>$1</code>')
}

fetch(DATA_URL)
.then(r=>r.json())
.then(data=>{
  const p=data.productos?.[id]
  if(!p){
    app.innerHTML=`
      <div class="error">
        <span class="material-symbols-rounded">error</span>
        <h1>Producto no encontrado</h1>
        <div class="desc">La descarga solicitada no existe.</div>
      </div>`
    return
  }

  app.innerHTML=`
    <h1>${p.titulo}</h1>
    <div class="desc">${rich(p.descripcion)}</div>
    ${p.secciones.map((s,i)=>{
      const recommended=
        (os.includes('win') && s.titulo.toLowerCase().includes('windows')) ||
        (os.includes('linux') && s.titulo.toLowerCase().includes('linux')) ||
        (os.includes('mac') && s.titulo.toLowerCase().includes('mac'))
      return `
      <div class="section">
        <div class="section-header" onclick="toggle(${i})">
          <span class="material-symbols-rounded">${s.icono}</span>
          <strong>${s.titulo}</strong>
          ${recommended?'<span class="recommended">Recomendado</span>':''}
        </div>
        <div class="section-content" id="sec${i}">
          <p>${rich(s.descripcion)}</p>
          <a class="download" href="${s.url}">
            <span class="material-symbols-rounded">download</span>
            Descargar
          </a>
        </div>
      </div>`
    }).join('')}
  `
})

function toggle(i){
  const el=document.getElementById('sec'+i)
  el.style.display=el.style.display==='block'?'none':'block'
}
</script>
</body>
</html>
