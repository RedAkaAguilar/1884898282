<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Descarga</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">

<style>
:root{
  --bg:#0e1116;
  --card:rgba(255,255,255,.06);
  --border:rgba(255,255,255,.12);
  --text:#fff;
  --muted:#cbd5e1;
  --accent:#38bdf8;
  --radius:22px;
}

body{
  margin:0;
  font-family:Outfit;
  color:var(--text);
  background:var(--bg);
}

.hero{
  position:relative;
  height:360px;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  overflow:hidden;
}

.hero-bg{
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
}

.hero-gradient{
  position:absolute;
  inset:0;
  background:
    linear-gradient(
      to bottom,
      rgba(14,17,22,0) 0%,
      rgba(14,17,22,.7) 60%,
      var(--bg) 100%
    );
}

.hero-logo{
  position:relative;
  z-index:2;
  width:140px;
  height:140px;
  border-radius:32px;
  box-shadow:0 20px 60px rgba(0,0,0,.6);
}

.container{
  max-width:1000px;
  margin:auto;
  padding:32px 20px;
}

.description{
  text-align:center;
  font-size:18px;
  line-height:1.6;
  color:var(--muted);
  margin-bottom:40px;
}

.sections{
  display:grid;
  gap:20px;
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:24px;
  display:flex;
  align-items:center;
  gap:20px;
  backdrop-filter:blur(14px);
  transition:.3s;
}

.card:hover{
  transform:translateY(-6px);
  box-shadow:0 20px 50px rgba(0,0,0,.4);
}

.icon{
  font-size:46px;
}

.card-content{
  flex:1;
}

.card-content h3{
  margin:0;
  font-size:20px;
}

.card-content p{
  margin:6px 0 0;
  color:var(--muted);
  white-space:pre-line;
}

.download-btn{
  padding:14px 22px;
  border-radius:999px;
  background:linear-gradient(135deg,#22c55e,#38bdf8);
  color:#fff;
  font-weight:700;
  text-decoration:none;
}
.grad{
  background:linear-gradient(90deg,#22c55e,#38bdf8);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
b{color:#fff}
i{opacity:.85}
</style>
</head>

<body>

<section class="hero">
  <div class="hero-bg" id="hero-bg"></div>
  <div class="hero-gradient"></div>
  <img id="hero-logo" class="hero-logo">
</section>

<div class="container">
  <div id="desc" class="description"></div>
  <div id="sections" class="sections"></div>
</div>

<script>
const params = new URLSearchParams(location.search)
const APP_ID = params.get("id")

fetch("/api/control/descarga-manager.json")
.then(r => r.json())
.then(data => {
  const app = data.apps.find(a => a.id === APP_ID)
  if(!app) return alert("App no encontrada")

  document.title = app.title

  document.getElementById("hero-bg").style.backgroundImage =
    `url(${app.banner})`

  document.getElementById("hero-logo").src = app.logo

  document.getElementById("desc").innerHTML = formatText(app.description)

  const wrap = document.getElementById("sections")

  app.secciones.forEach(s => {
    const card = document.createElement("div")
    card.className = "card"
    card.innerHTML = `
      <span class="material-symbols-rounded icon">${s.icono}</span>
      <div class="card-content">
        <h3>${s.titulo}</h3>
        <p>${formatText(s.descripcion)}</p>
      </div>
      <a class="download-btn" href="${s.link}" target="_blank">
        Descargar
      </a>
    `
    wrap.appendChild(card)
  })
})

function formatText(t){
  return t
    .replace(/\*\*(.*?)\*\*/g,"<b>$1</b>")
    .replace(/_(.*?)_/g,"<i>$1</i>")
    .replace(/<grad>(.*?)<\/grad>/g,'<span class="grad">$1</span>')
}
</script>

</body>
</html>

