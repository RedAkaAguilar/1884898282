<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />

<meta property="og:type" content="website">
<meta property="og:site_name" content="ZyrAkaNetwork">
<meta property="og:title" content="ZyrAkaNetwork">
<meta property="og:description" content="Página oficial de ZyrAkaNetwork • Servidor Minecraft con eventos, comunidad y recompensas">
<meta property="og:url" content="https://www.zyrakaworld.net/">

<meta property="og:image" content="https://raw.githubusercontent.com/RedAkaAguilar/1884898282/main/textures/-webpage-imgtool.png">
<meta property="og:image:secure_url" content="https://raw.githubusercontent.com/RedAkaAguilar/1884898282/main/textures/-webpage-imgtool.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<meta property="og:locale" content="es_ES">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="ZyrAkaNetwork">
<meta name="twitter:description" content="Página oficial del servidor ZyrAkaNetwork">
<meta name="twitter:image" content="https://raw.githubusercontent.com/RedAkaAguilar/1884898282/main/textures/-webpage-imgtool.png">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover"/>
<title>Notificaciones</title>

<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0b0f14;

  --glass:rgba(255,255,255,.18);
  --glass-strong:rgba(255,255,255,.26);
  --border:rgba(255,255,255,.35);

  --text:#ffffff;
  --muted:rgba(255,255,255,.75);

  --radius:22px;
  --blur:30px;

  --shadow:
    inset 0 1px 0 rgba(255,255,255,.6),
    0 40px 120px rgba(0,0,0,.6);

  --spring:cubic-bezier(.28,1.25,.55,1);
}

* {
  box-sizing:border-box
  max-width: 100vw;
}

*, *::before, *::after {
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  -webkit-focus-ring-color: rgba(0,0,0,0);
  outline: none !important;
}
  
body{
  margin:0;
  font-family:Outfit,system-ui;
  background:linear-gradient(120deg,#290d0b,#0b291a,#0b1729,#240b29);
  background-size:400% 400%;
  animation:bg 18s ease infinite;
  color:var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

html, body {
  overflow-x: hidden;
  overflow-y: auto;
  width: 100%;
  touch-action: pan-y;
  overscroll-behavior-x: none;
}

@keyframes bg{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(30px);
  -webkit-backdrop-filter:blur(30px);
  opacity:0;
  pointer-events:none;
  transition:opacity .45s ease;
  z-index:1000;
}

.overlay.show{
  opacity:1;
  pointer-events:auto;
}

.overlay-card{
  position:absolute;
  inset:16px;
  background:
    linear-gradient(
      180deg,
      rgba(255,255,255,.45),
      rgba(255,255,255,.15)
    );
  border-radius:28px;
  overflow:hidden;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.7),
    0 80px 200px rgba(0,0,0,.8);

  transform:scale(.94) translateY(40px);
  opacity:0;
  transition:
    transform .55s var(--spring),
    opacity .35s ease;
}

.overlay.show .overlay-card{
  transform:scale(1) translateY(0);
  opacity:1;
}

.overlay-card img{
  width:100%;
  height:38vh;
  object-fit:cover;
}

.overlay-content{
  padding:22px;
}

.overlay-date{
  font-size:13px;
  color:var(--muted);
  margin-bottom:6px;
}

.overlay-content h2{
  margin:0;
  font-size:22px;
}

.overlay-content p{
  margin-top:10px;
  font-size:16px;
  line-height:1.5;
  color:var(--muted);
}

.overlay-close{
  position:absolute;
  top:14px;
  right:14px;
  width:44px;
  height:44px;
  border-radius:50%;
  border:1px solid var(--border);

  background:
    linear-gradient(
      180deg,
      rgba(255,255,255,.45),
      rgba(255,255,255,.2)
    );

  backdrop-filter:blur(20px);
  color:white;
  display:flex;
  align-items:center;
  justify-content:center;

  font-size:22px;
  cursor:pointer;
  transition:transform .3s var(--spring);
}

.overlay-close:active{
  transform:scale(.88);
}

.liquid-bg{
  position:fixed;
  inset:-20%;
  z-index:-1;
  filter:blur(120px);
  pointer-events:none;
}

.liquid-bg span{
  position:absolute;
  width:45vw;
  height:45vw;
  border-radius:50%;
  background:rgba(255,255,255,.18);
  animation:liquidMove 25s ease-in-out infinite;
}

.liquid-bg span:nth-child(1){top:10%;left:10%}
.liquid-bg span:nth-child(2){bottom:15%;right:10%;animation-duration:32s}
.liquid-bg span:nth-child(3){top:40%;right:30%;animation-duration:40s}

@keyframes liquidMove{
  0%{transform:translate(0,0) scale(1)}
  50%{transform:translate(80px,-60px) scale(1.3)}
  100%{transform:translate(0,0) scale(1)}
}

.container{
  max-width:1100px;
  margin:30px auto;
  padding:20px;
}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:22px;
  backdrop-filter:blur(var(--blur)) saturate(180%);
  -webkit-backdrop-filter:blur(var(--blur)) saturate(180%);
  background:linear-gradient(
    180deg,
    rgba(255,255,255,.22),
    rgba(255,255,255,.08)
  );
  border:1px solid var(--border);
  border-radius:24px;
  padding:14px 18px;
}
  
h1, h3{
  margin:0;
  font-size:22px;
  font-weight:700;
  letter-spacing:.3px;
}

p, .date{
  letter-spacing:.2px;
}

.back{
  display:flex;
  align-items:center;
  gap:6px;
  padding:10px 16px;
  border-radius:999px;

  background:
    linear-gradient(
      180deg,
      rgba(255,255,255,.45),
      rgba(255,255,255,.18)
    );

  backdrop-filter:blur(20px);
  border:1px solid var(--border);

  color:white;
  font-weight:600;
  text-decoration:none;

  transition:transform .35s var(--spring);
}

.back:active{
  transform:scale(.92);
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:18px;
}

.card{
  background:
    linear-gradient(
      180deg,
      rgba(255,255,255,.35),
      rgba(255,255,255,.12)
    );
  backdrop-filter:blur(var(--blur)) saturate(180%);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
  display:flex;
  flex-direction:column;

  opacity:0;
  cursor:pointer;
  transform:translateY(20px) scale(.96);
  filter:blur(8px);
  transition:
    transform .45s var(--spring),
    box-shadow .45s ease;
}

.card.link{
  cursor:pointer;
}

.card.link::after{
  content:"arrow_forward";
  font-family:'Material Symbols Rounded';
  position:absolute;
  top:12px;
  right:12px;
  font-size:20px;
  opacity:.7;
}

.card:hover{
  transform:translateY(-8px) scale(1.03);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.8),
    0 60px 160px rgba(255,255,255,.25);
}

.card.show{
  opacity:1;
  transform:none;
  filter:blur(0);
}

.card img{
  width:100%;
  height:160px;
  object-fit:cover;
}

.card-content{
  padding:14px;
  display:flex;
  flex-direction:column;
  gap:6px;
}

.dynamic-island{
  position:fixed;
  top:14px;
  left:50%;
  transform:translateX(-50%) scale(.9);
  padding:10px 18px;
  border-radius:999px;

  background:
    linear-gradient(
      180deg,
      rgba(0,0,0,.85),
      rgba(0,0,0,.65)
    );

  color:white;
  display:flex;
  align-items:center;
  gap:8px;

  font-size:13px;
  font-weight:600;

  opacity:0;
  pointer-events:none;

  transition:
    opacity .3s ease,
    transform .45s var(--spring);

  z-index:2000;
}

.dynamic-island.show{
  opacity:1;
  transform:translateX(-50%) scale(1);
}

.date{
  font-size:12px;
  color:var(--muted);
}

.card h3{
  margin:0;
  font-size:16px;
}

.card p{
  margin:0;
  font-size:14px;
  color:var(--muted);
}

footer{
  text-align:center;
  margin-top:30px;
  font-size:13px;
  color:var(--muted);
}
</style>
</head>

<body>
<div class="liquid-bg">
  <span></span>
  <span></span>
  <span></span>
</div>

<div class="container">

<header>
  <h1><span class="material-symbols-rounded">notifications_active</span> Notificaciones</h1>
  <a href="server" class="back">
    <span class="material-symbols-rounded">arrow_back</span> Volver
  </a>
</header>

<main class="grid" id="newsGrid"></main>

<footer>
  © <span id="year"></span> ZyrAkaNetwork
</footer>

</div>
<div class="overlay" id="overlay">
  <div class="overlay-card" id="overlayCard">
    <button class="overlay-close" onclick="closeCard()">
      <span class="material-symbols-rounded">close</span>
    </button>

    <img id="overlayImg">
    <div class="overlay-content">
      <div class="overlay-date" id="overlayDate"></div>
      <h2 id="overlayTitle"></h2>
      <p id="overlayDesc"></p>
    </div>
  </div>
</div>

<div class="dynamic-island" id="island">
  <span class="material-symbols-rounded">notifications</span>
  <span>Notificación abierta</span>
</div>
<script>
document.getElementById('year').textContent = new Date().getFullYear();
let lastHash = '';

async function cargarNoticias(){
  try{
    const res = await fetch('../api/control/notificaciones.json?cache=' + Date.now());
    const data = await res.json();

    const hash = JSON.stringify(data);
    if(hash === lastHash) return;
    lastHash = hash;

    const grid = document.getElementById('newsGrid');
    grid.innerHTML = '';

    data.forEach((n,i)=>{
  const card = document.createElement('article');
  card.className = 'card';

  if(n.clickable === true && n.url){
    card.classList.add('link');

    card.addEventListener('click', () => {
      haptic('medium');
      location.href = n.url;
    });

  }else{
    // Comportamiento normal (overlay)
    card.addEventListener('click', () => openCard(n));
  }

  card.innerHTML = `
    <img src="${n.image}" alt="${n.title}">
    <div class="card-content">
      <div class="date">${new Date(n.date).toLocaleDateString()}</div>
      <h3>${n.title}</h3>
      <p>${n.description}</p>
    </div>
  `;

  grid.appendChild(card);
  setTimeout(()=>card.classList.add('show'), i * 120);
});

  }catch(e){
    console.error('Error cargando notificaciones', e);
  }
}

function openCard(n){
  haptic('medium');
  document.getElementById('overlayImg').src = n.image;
  document.getElementById('overlayTitle').textContent = n.title;
  document.getElementById('overlayDesc').textContent = n.description;
  document.getElementById('overlayDate').textContent =
    new Date(n.date).toLocaleDateString();

  document.getElementById('overlay').classList.add('show');
  document.body.style.overflow = 'hidden';
}

const island = document.getElementById('island');
island.classList.add('show');
setTimeout(()=>island.classList.remove('show'), 1800);

function closeCard(){
  haptic('light');
  document.getElementById('overlay').classList.remove('show');
  document.body.style.overflow = '';
}

window.addEventListener('pageshow', cargarNoticias);
window.addEventListener('load', cargarNoticias);

function haptic(type = 'light'){
  if(!navigator.vibrate) return;

  const patterns = {
    light: [10],
    medium: [15],
    heavy: [25]
  };

  navigator.vibrate(patterns[type]);
}

cargarNoticias();
setInterval(cargarNoticias, 3000);

let startY = 0;
let currentY = 0;
let dragging = false;

const overlayCard = document.getElementById('overlayCard');

overlayCard.addEventListener('touchstart', e=>{
  startY = e.touches[0].clientY;
  dragging = true;
  overlayCard.style.transition = 'none';
});

overlayCard.addEventListener('touchmove', e=>{
  if(!dragging) return;
  currentY = e.touches[0].clientY - startY;
  if(currentY > 0){
    overlayCard.style.transform = `translateY(${currentY}px) scale(${1 - currentY / 1200})`;
  }
});

overlayCard.addEventListener('touchend', ()=>{
  dragging = false;
  overlayCard.style.transition = 'transform .45s var(--spring)';

  if(currentY > 120){
    haptic('heavy');
    closeCard();
  }else{
    overlayCard.style.transform = 'translateY(0) scale(1)';
  }

  currentY = 0;
});

document.addEventListener('contextmenu', e => {
  if (e.target.tagName === 'IMG') {
    e.preventDefault();
  }
});

document.addEventListener('touchstart', function (e) {
  if (e.touches.length > 1) {
    e.preventDefault();
  }
}, { passive: false });

let lastTouchEnd = 0;
document.addEventListener('touchend', function (e) {
  const now = Date.now();
  if (now - lastTouchEnd <= 300) {
    e.preventDefault();
  }
  lastTouchEnd = now;
}, false);

  document.addEventListener('wheel', function (e) {
  if (e.ctrlKey) {
    e.preventDefault();
  }
}, { passive: false });
</script>
</body>
</html>
