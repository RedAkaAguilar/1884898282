<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Evento</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Outfit;
  color:white;
  background:#0e1116;
  overflow-x:hidden;
}

/* BACKGROUND DINÁMICO */
#bg{
  position:fixed;
  inset:0;
  background-size:cover;
  background-position:center;
  z-index:-2;
  transition:1s ease;
}

/* GRADIENT OVERLAY */
#overlay{
  position:fixed;
  inset:0;
  background:linear-gradient(to bottom, transparent 0%, #0e1116 80%);
  z-index:-1;
}

/* TITLE IMAGE */
#titleImg{
  display:block;
  margin:60px auto 20px;
  max-width:90%;
  height:auto;
  transition:.5s;
}

/* CONTENT BOX */
.container{
  width:90%;
  max-width:900px;
  margin:40px auto;
  padding:40px;
  border-radius:20px;

  background:rgba(255,255,255,0.06);
  backdrop-filter:blur(16px);

  border:1px solid rgba(255,255,255,0.1);
  text-align:center;
}

h1{
  margin:0 0 10px;
  font-size:32px;
}

p{
  color:#cbd5e1;
  margin-bottom:30px;
}

/* BUTTONS */
.btn{
  display:block;
  width:100%;
  padding:16px;
  margin-top:12px;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
  transition:.25s;
}

.download{
  background:#22c55e;
  color:white;
}

.ip{
  background:#38bdf8;
  color:white;
}

.btn:hover{
  transform:translateY(-3px);
}
</style>
</head>

<body>

<div id="bg"></div>
<div id="overlay"></div>

<img id="titleImg">

<div class="container">
  <h1 id="title"></h1>
  <p id="desc"></p>

  <button class="btn download" id="downloadBtn">Descargar Assets</button>
  <button class="btn ip" id="ipBtn">Copiar IP</button>
</div>

<script>
let lastHash = '';

async function checkEvent(){
  const res = await fetch('./data/dataManager.json?nocache=' + Date.now());
  const data = await res.json();

  const hash = JSON.stringify(data);
  if(hash === lastHash) return;
  lastHash = hash;

  const active = data.instances.find(i => i.active === true);
  if(!active) return;

  applyEvent(active);
}

function applyEvent(e){

  document.getElementById('bg').style.backgroundImage = `url(${e.background})`;

  document.getElementById('titleImg').src = e.titleImg;

  document.getElementById('title').textContent = e.title;
  document.getElementById('desc').textContent = e.description;

  document.getElementById('downloadBtn').onclick = () => {
    window.open(e.assetsDownload, '_blank');
  };

  document.getElementById('ipBtn').onclick = () => {
    navigator.clipboard.writeText(e.ip);
    document.getElementById('ipBtn').textContent = "IP Copiada ✔";
    setTimeout(()=>document.getElementById('ipBtn').textContent="Copiar IP",2000);
  };
}

setInterval(checkEvent, 1000);
checkEvent();
</script>

</body>
</html>
