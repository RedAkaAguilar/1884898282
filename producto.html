<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Producto</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">

<style>
:root{
  --bg:#0e1116;
  --card:#121826;
  --border:rgba(255,255,255,.08);
  --text:#ffffff;
  --muted:#94a3b8;
  --accent:#38bdf8;
  --cta:#22c55e;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Outfit,sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* ---------- CONTENEDOR ---------- */

.container{
  max-width:1200px;
  margin:auto;
  padding:20px;
}

/* ---------- TARJETA ---------- */

.product{
  display:grid;
  gap:24px;
}

/* PC */
@media(min-width:900px){
  .product{
    grid-template-columns:1.1fr 1fr;
    align-items:start;
  }
}

/* ---------- IMAGEN ---------- */

.media{
  background:rgba(255,255,255,.03);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
}

.media img{
  width:100%;
  height:420px;
  object-fit:contain;
  transition:transform .4s ease;
}

.media:hover img{
  transform:scale(1.05);
}

/* ---------- INFO ---------- */

.info h1{
  font-size:clamp(22px,2.6vw,30px);
  margin:0 0 10px;
}

.rating{
  font-size:16px;
  letter-spacing:2px;
  color:#facc15;
  margin-bottom:10px;
}

.rating span{
  color:#94a3b8;
}

.desc{
  font-size:15px;
  line-height:1.6;
  color:var(--muted);
  margin-top:10px;
}

/* ---------- COMPRA ---------- */

.buy{
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  border:1px solid var(--border);
  border-radius:18px;
  padding:18px;
  margin-top:16px;
}

.price{
  display:flex;
  align-items:baseline;
  gap:10px;
}

.price .current{
  font-size:30px;
  font-weight:700;
  color:white;
}

.price .old{
  font-size:14px;
  text-decoration:line-through;
  color:var(--muted);
}

.stock{
  font-size:14px;
  color:#4ade80;
  margin:8px 0;
}

/* ---------- BOTONES ---------- */

.actions{
  display:flex;
  gap:12px;
  margin-top:16px;
}

.btn{
  flex:1;
  height:48px;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  border:none;
  border-radius:14px;
  font-weight:700;
  cursor:pointer;
  background:linear-gradient(135deg,var(--cta),var(--accent));
  color:white;
}

.btn:hover{
  box-shadow:0 10px 30px rgba(34,197,94,.3);
}

.btn.alt{
  background:transparent;
  border:1px solid var(--border);
}

/* ---------- BACK ---------- */

.back{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:14px;
  color:var(--muted);
  text-decoration:none;
  margin-bottom:12px;
}

.back:hover{
  color:white;
}

.fav{
  width:48px;
  flex:0 0 48px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.fav.active{
  border-color:#ec4899;
}

.fav.active span{
  color:#ec4899;
}

/* ---------- MOBILE ---------- */

@media(max-width:899px){
  .media img{
    height:300px;
  }
}
</style>
</head>

<body>

<div class="container">
  <a href="index.html" class="back">
    <span class="material-symbols-rounded">arrow_back</span>
    Volver a la tienda
  </a>

  <div id="product"></div>
</div>

<script>
const params = new URLSearchParams(location.search);
const id = params.get("id");

async function cargar(){
  const res = await fetch("tienda.json");
  const data = await res.json();
  const p = data.productos.find(x => x.id === id);

  if(!p){
    product.innerHTML = "Producto no encontrado";
    return;
  }

  const final = p.descuento
    ? (p.precio - p.precio * p.descuento / 100).toFixed(2)
    : p.precio;

  product.innerHTML = `
    <div class="product">
      <div class="media">
        <img src="${p.imagen}" alt="${p.titulo}">
      </div>

      <div class="info">
        <h1>${p.titulo}</h1>

        <div class="rating">
        ★★★★★
        </div>

        <p class="desc">${p.descripcion}</p>

        <div class="buy">
          <div class="price">
            <div class="current">$${final}</div>
            ${p.descuento ? `<div class="old">$${p.precio}</div>` : ""}
          </div>

          <div class="stock">Disponible</div>

          <div class="actions">
            <a href="${p.link}" class="btn" target="_blank">
              Comprar ahora
            </a>
            <button class="btn alt fav" data-id="${p.id}">
            <span class="material-symbols-rounded">favorite</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  `;
}

cargar();
initFavorito(p.id);
function initFavorito(productId){
  const favBtn = document.querySelector('.fav');
  if(!favBtn) return;

  const key = 'fav_' + productId;

  // estado guardado
  if(localStorage.getItem(key) === 'true'){
    favBtn.classList.add('active');
  }

  favBtn.addEventListener('click', () => {
    favBtn.classList.toggle('active');
    localStorage.setItem(key, favBtn.classList.contains('active'));
  });
}

</script>

</body>
</html>
