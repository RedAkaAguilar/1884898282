<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Producto</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">

<style>
:root{
  --bg:#0e1116;
  --card:#121826;
  --border:rgba(255,255,255,.08);
  --muted:#94a3b8;
  --grad:linear-gradient(135deg,#22c55e,#38bdf8);
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Outfit,sans-serif;
  background:var(--bg);
  color:#fff;
}

/* ---------- LAYOUT ---------- */

.container{
  max-width:1100px;
  margin:auto;
  padding:20px;
}

.card{
  display:grid;
  grid-template-columns:1fr;
  gap:22px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:18px;
}

/* PC */
@media(min-width:900px){
  .card{
    grid-template-columns:1.1fr 1fr;
    padding:24px;
  }
}

/* ---------- IMAGEN ---------- */

.media{
  position:relative;
  overflow:hidden;
  border-radius:14px;
}

.media img{
  width:100%;
  height:100%;
  object-fit:cover;
  transition:transform .5s ease;
}

.media:hover img{
  transform:scale(1.05);
}

/* ---------- TEXTO ---------- */

h1{
  margin:0;
  font-size:clamp(22px,3vw,30px);
  line-height:1.2;
}

.desc{
  color:var(--muted);
  font-size:15px;
  line-height:1.6;
}

/* ---------- PRECIO ---------- */

.price{
  display:flex;
  align-items:center;
  gap:10px;
  margin-top:10px;
}

.current{
  font-size:26px;
  font-weight:700;
}

.old{
  font-size:14px;
  color:var(--muted);
  text-decoration:line-through;
}

/* ---------- BOTONES ---------- */

.actions{
  display:flex;
  gap:12px;
  margin-top:18px;
}

.btn{
  flex:1;
  min-height:48px;
  border:none;
  border-radius:12px;
  font-weight:700;
  cursor:pointer;
  background:var(--grad);
  color:#fff;
  transition:transform .15s ease,box-shadow .15s ease;
}

.btn:active{
  transform:scale(.97);
}

.btn.alt{
  background:transparent;
  border:1px solid var(--border);
}

.back{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:14px;
  color:#94a3b8;
  text-decoration:none;
  margin-bottom:10px;
}

.back span{
  font-size:18px;
}

.back:hover{
  color:white;
}

/* ---------- ESTADOS ---------- */

.center{
  text-align:center;
  padding:40px;
  color:var(--muted);
}
</style>
</head>

<body>
<a href="shop.html" class="back">
  <span class="material-symbols-rounded">arrow_back</span>
  Volver a la tienda
</a>
<div class="container">
  <div id="product" class="center">Cargando productoâ€¦</div>
</div>
<script>
const params = new URLSearchParams(location.search);
const productId = params.get("id");

async function cargarProducto(){
  try{
    const res = await fetch("tienda.json");
    const data = await res.json();
    const p = data.productos.find(x => x.id === productId);

    if(!p){
      product.innerHTML = "<div class='center'>Producto no encontrado</div>";
      return;
    }

    if(!p.disponible){
      product.innerHTML = `<div class="center">
        <h2>${p.titulo}</h2>
        <p>No disponible actualmente</p>
      </div>`;
      return;
    }

    const precioFinal = p.descuento
      ? (p.precio - (p.precio * p.descuento / 100)).toFixed(2)
      : p.precio;

    product.innerHTML = `
      <div class="card">
        <div class="media">
          <img src="${p.imagen}" alt="${p.titulo}">
        </div>

        <div>
          <h1>${p.titulo}</h1>
          <p class="desc">${p.descripcion}</p>

          <div class="price">
            <div class="current">$${precioFinal}</div>
            ${p.descuento ? `<div class="old">$${p.precio}</div>` : ""}
          </div>

          <div class="actions">
            <a href="${p.link}" class="btn" target="_blank">
            Comprar ahora
            </a>
            <button class="btn alt">
              <span class="material-symbols-rounded">favorite</span>
            </button>
          </div>
        </div>
      </div>
    `;
  }catch(e){
    product.innerHTML = "<div class='center'>Error cargando producto</div>";
    console.error(e);
  }
}

cargarProducto();
</script>

</body>
</html>
